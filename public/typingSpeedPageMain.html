<html>
<head>
<title>Typing speed</title>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width initial-scale=1">
    <link rel="stylesheet" href="css/typingSpeed.css">
	<link rel="stylesheet" href="css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="css/bootstrap.min.js" type="text/javascript"></script>
	</head>
	
	<body>
	<div class="site-wrapper">
  <div class="site-wrapper-inner">
    <div class="cover-container">
      <div class="masthead clearfix">
        <div class="inner">
          <h3 class="masthead-brand">Typing speed test</h3>
		  <ul class="nav masthead-nav ">

            <li>
              <a class="btn btn-lg btn-info" href="#">Log Out</a>
            </li>
</ul>
        </div>
      </div>

      <div class="inner cover">
        <p class="lead" id="displayInformation">
                       
        </p>
        <h1 class="cover-heading">Test your typing speed</h1>

        <p class="lead" id="wordToTypeField">
                       
        </p>
		
		<p><textarea type="text" id="inputType" class="form-control" placeholder="Type here" required ></textarea></p>

        <p class="lead">
          <a class="btn btn-lg btn-info" id="startTest"  href="#">Start Test</a>
        <a class="btn btn-lg btn-danger" id="stopTest" href="#">Stop Test</a>
        </p>
      </div>

      <div class="mastfoot">
        <div class="inner">
          <p>Â© 2017 Tim's Typing speed app ~ </p>
        </div>
      </div>
    </div>
</div>
</div>

<script>
//(function(){
  let stringWord = "Innovative Technical Solutions, LLC (ITS) is a Native American owned business that was established in Paducah, Kentucky in April 2000. ITS is a certified and Small Disadvantaged Business by the U.S. Small Business Administration.";
let neededWord = document.getElementById('wordToTypeField');
neededWord.innerHTML = stringWord;
//let givenWord = stringWord.split('');
let typedWord = document.getElementById('inputType').value;
//let wordLength = typedWord.split('').length;
//let lettersInGivenString = typedWord.split('');
let errorCount = 0;



 const calcGrossWPM = (wordsTyped) => {
     return Math.round((wordsTyped/5)/1);  // Divides by one or any time specified by the timer
 }

 const calcNetWPM = (originalWords, typedWords) => {
   let orignalLettersArray = originalWords.split('');
   let neededLettersArray = originalWords.split('');
     for(counter = 0; counter < typedWords.length; counter++){
         if(typedWords[counter] !== originalWords[counter]){
             errorCount++
         }
     const result = ((neededLettersArray/5)-errorCount)/1
 }
   return JSON.parse(`{ "result" : ${result}, "errors": ${errorCount}}`);
}

let timer = setInterval(()=>{
  let timeInSecs = 60;
  let timerDisplay = document.getElementById("displayInformation");
  if(timeInSecs !== 0){
    timeInSecs --;
    if(timeInSecs >= 10){
      timerDisplay.innerHTML = timeInSecs + "s remaining";
      timerDisplay.style.color= "green";
    }
    else if(num < 10){
      timerDisplay.innerHTML = timeInSecs + 's '+"<p>Come on, You can do it!</p>;";
      timerDisplay.style.color= "red";
    }
    else if(timeInSecs <= 0){
      clearInterval(timer);
    }
  }
},1000);

const beginTest = () => {
   // Deter copy and paste
    neededWord.addEventListener('copy cut paste', e => e.preventDefault());
    timer;
}
document.getElementById("inputType").addEventListener('focus', beginTest.bind());


const endTest = ()=>{
  let displayInformation = document.getElementById("displayInformation");
  if(typedWord === ""){
    displayInformation.innerHTML = "Hey it seems you did not type anything.";
  }
  else{
    let calcWpm = calcGrossWPM(typedWord);
    let calNWpm = calcNetWPM(stringWord, typedWord);
  }
}
  

//})


</script>
	</body>
</html>